{"version":3,"file":"create-theme-vars.js","names":["_utils","require","_cssVar2","createThemeVars","exports","target","options","context","cssVars","cssMap","walkObject","value","path","_tokenHandlerMap$firs","firstKey","handler","tokenHandlerMap","defaultHandler","_handler","Object","assign","keys","_cssVars","_cssMap","lookupKey","join","varKey","_cssVar","cssVar","undefined","cssVarPrefix","variable","reference","varRef"],"sources":["../../../src/create-theme-vars/create-theme-vars.ts"],"sourcesContent":["import { Dict, walkObject } from '@shtcut-ui/utils';\nimport { ThemeScale } from './theme-tokens';\nimport { cssVar } from './css-var';\n\nexport interface CreateThemeVarsOptions {\n  cssVarPrefix?: string;\n}\n\nexport interface ThemeVars {\n  cssVars: Dict;\n  cssMap: Dict;\n}\n\n/**\n * The `createThemeVars` function takes a target object and options, and returns a context object\n * containing CSS variables and a CSS map.\n * @param {Dict} target - The `target` parameter is an object that contains the theme variables that\n * you want to create. It can be any JavaScript object that represents the theme variables.\n * @param {CreateThemeVarsOptions} options - The `options` parameter is an object that contains\n * additional configuration options for creating theme variables. It is of type\n * `CreateThemeVarsOptions`.\n * @returns The function `createThemeVars` returns an object of type `ThemeVars`.\n */\nexport const createThemeVars = (target: Dict, options: CreateThemeVarsOptions) => {\n  const context: ThemeVars = {\n    cssVars: {},\n    cssMap: {},\n  };\n\n  walkObject(target, (value, path) => {\n    const [firstKey] = path;\n\n    // @ts-ignore\n    const handler = tokenHandlerMap[firstKey] ?? tokenHandlerMap.defaultHandler;\n\n    const { cssVars, cssMap } = handler(path, value, options);\n    Object.assign(context.cssVars, cssVars);\n    Object.assign(context.cssMap, cssMap);\n  });\n  return context;\n};\n\ntype TokenHandler = (\n  keys: string[],\n  value: unknown | { reference: string },\n  options: CreateThemeVarsOptions,\n) => ThemeVars;\n\n/* The `tokenHandlerMap` is an object that maps different keys (of type `ThemeScale`) to corresponding\nhandler functions. Each handler function takes in `keys`, `value`, and `options` as parameters and\nreturns an object with `cssVars` and `cssMap` properties. */\nconst tokenHandlerMap: Partial<Record<ThemeScale, TokenHandler>> & {\n  defaultHandler: TokenHandler;\n} = {\n  defaultHandler: (keys, value, options) => {\n    const lookupKey = keys.join('.');\n    const varKey = keys.join('-');\n\n    const { variable, reference } = cssVar(varKey, undefined, options.cssVarPrefix);\n\n    return {\n      cssVars: {\n        [variable]: value,\n      },\n      cssMap: {\n        [lookupKey]: {\n          value,\n          var: variable,\n          varRef: reference,\n        },\n      },\n    };\n  },\n};\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,QAAA,GAAAD,OAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAME,eAAe,GAAAC,OAAA,CAAAD,eAAA,GAAG,SAAlBA,eAAeA,CAAIE,MAAY,EAAEC,OAA+B,EAAK;EAChF,IAAMC,OAAkB,GAAG;IACzBC,OAAO,EAAE,CAAC,CAAC;IACXC,MAAM,EAAE,CAAC;EACX,CAAC;EAED,IAAAC,iBAAU,EAACL,MAAM,EAAE,UAACM,KAAK,EAAEC,IAAI,EAAK;IAAA,IAAAC,qBAAA;IAClC,IAAOC,QAAQ,GAAIF,IAAI;;IAEvB;IACA,IAAMG,OAAO,IAAAF,qBAAA,GAAGG,eAAe,CAACF,QAAQ,CAAC,YAAAD,qBAAA,GAAIG,eAAe,CAACC,cAAc;IAE3E,IAAAC,QAAA,GAA4BH,OAAO,CAACH,IAAI,EAAED,KAAK,EAAEL,OAAO,CAAC;MAAjDE,OAAO,GAAAU,QAAA,CAAPV,OAAO;MAAEC,MAAM,GAAAS,QAAA,CAANT,MAAM;IACvBU,MAAM,CAACC,MAAM,CAACb,OAAO,CAACC,OAAO,EAAEA,OAAO,CAAC;IACvCW,MAAM,CAACC,MAAM,CAACb,OAAO,CAACE,MAAM,EAAEA,MAAM,CAAC;EACvC,CAAC,CAAC;EACF,OAAOF,OAAO;AAChB,CAAC;AAQD;AACA;AACA;AACA,IAAMS,eAEL,GAAG;EACFC,cAAc,EAAE,SAAAA,eAACI,IAAI,EAAEV,KAAK,EAAEL,OAAO,EAAK;IAAA,IAAAgB,QAAA,EAAAC,OAAA;IACxC,IAAMC,SAAS,GAAGH,IAAI,CAACI,IAAI,CAAC,GAAG,CAAC;IAChC,IAAMC,MAAM,GAAGL,IAAI,CAACI,IAAI,CAAC,GAAG,CAAC;IAE7B,IAAAE,OAAA,GAAgC,IAAAC,eAAM,EAACF,MAAM,EAAEG,SAAS,EAAEvB,OAAO,CAACwB,YAAY,CAAC;MAAvEC,QAAQ,GAAAJ,OAAA,CAARI,QAAQ;MAAEC,SAAS,GAAAL,OAAA,CAATK,SAAS;IAE3B,OAAO;MACLxB,OAAO,GAAAc,QAAA,OAAAA,QAAA,CACJS,QAAQ,IAAGpB,KAAK,EAAAW,QAAA,CAClB;MACDb,MAAM,GAAAc,OAAA,OAAAA,OAAA,CACHC,SAAS,IAAG;QACXb,KAAK,EAALA,KAAK;QACL,OAAKoB,QAAQ;QACbE,MAAM,EAAED;MACV,CAAC,EAAAT,OAAA;IAEL,CAAC;EACH;AACF,CAAC"}